<mat-toolbar class="shadow" style="position: absolute;top: 0;z-index: 5;background: white;">
    <div class="spacer"></div>
    <small>Filter</small>
    <div class="spacer"></div>
</mat-toolbar>
<mat-accordion style="margin-top: 3rem;" class="shadow">
    <mat-expansion-panel   class="shadow mat-elevation-z0">
        <mat-expansion-panel-header>
            <small class="text-uppercase text-thin">Garments Category</small>
            <div class="spacer"></div>
        </mat-expansion-panel-header>
        <div>
            <app-search (onSearch)="onSearch($event)"></app-search>
        </div>

        <mat-selection-list dense>
            <cdk-virtual-scroll-viewport appendOnly itemSize="50" class="example-viewport" style="height: 30vh;">
                <mat-list-option  *cdkVirtualFor="let category of categories | filter:searchText"
                    (click)="onFilterSelection(category)">
                    <small class=" text-thin text-uppercase">{{category.name | uppercase}}</small>
                </mat-list-option>
              </cdk-virtual-scroll-viewport>
        </mat-selection-list>
    </mat-expansion-panel>
    <mat-expansion-panel *ngIf="isFilterAvailable('brand')" class="shadow mat-elevation-z0">
        <mat-expansion-panel-header>
            <small class="text-uppercase text-thin">Brands</small>
            <div class="spacer"></div>
        </mat-expansion-panel-header>
        <div>
            <app-search [(searchPlaceholder)]="searchPlaceholder" (onSearch)="onSearch($event)"></app-search>
        </div>

        <mat-selection-list dense>
            <cdk-virtual-scroll-viewport appendOnly itemSize="50" class="example-viewport" style="height: 30vh;">
            <mat-list-option  *ngFor="let brand of brands | filter:searchText"
                (click)="onFilterSelection(brand)">
                <small class="text-uppercase text-thin">{{brand.name | uppercase}}</small>
            </mat-list-option>
        </cdk-virtual-scroll-viewport>
        </mat-selection-list>
    </mat-expansion-panel>
    <mat-expansion-panel  class="shadow mat-elevation-z0">
        <mat-expansion-panel-header>
            <small class="text-uppercase text-thin">Colors</small>
            <div class="spacer"></div>
        </mat-expansion-panel-header>
        <div>
            <app-search [(searchPlaceholder)]="searchPlaceholder" (onSearch)="onSearch($event)"></app-search>
        </div>

        <mat-selection-list dense>
            <cdk-virtual-scroll-viewport appendOnly itemSize="50" class="example-viewport" style="height: 30vh;">
            <mat-list-option  *ngFor="let color of colors | filter:searchText" [selected]="isFilterSelected(color.name)"
                (click)="onFilterSelection(color)">
                <div class="d-flex">
                    <span class="color-box mr-1" [style.background]="color.code" ></span>
                    <small class="text-uppercase text-thin" [style.color]="color.code" style="text-shadow: 0 0 black;">{{color.name | uppercase}}</small>
                </div>
            </mat-list-option>
            </cdk-virtual-scroll-viewport>
        </mat-selection-list>
    </mat-expansion-panel>
    <!-- <mat-expansion-panel  class="shadow mat-elevation-z0">
        <mat-expansion-panel-header>
            <small class="text-uppercase text-thin">Gender</small>
            <div class="spacer"></div>
        </mat-expansion-panel-header>

        <mat-selection-list dense>
            <mat-list-option 
                *ngFor="let category of cutomerCategoryByGender" (click)="onFilterSelection(category)">
                <small class="text-uppercase text-thin">{{category.keys | uppercase }}</small>
            </mat-list-option>
        </mat-selection-list>
    </mat-expansion-panel> -->
    <!-- <mat-expansion-panel *ngIf="isFilterAvailable('alphabet')" class="shadow mat-elevation-z0">
        <mat-expansion-panel-header>
            <small class="strong">Name Start With</small>
            <div class="spacer"></div>
        </mat-expansion-panel-header>

        <mat-card class="mat-elevation-z0"
            style="display: flex;flex-direction: row;flex-wrap: wrap;justify-content: flex-start;">
            <button mat-icon-button [color]="isFilterSelected(category) ? 'accent' : ''"
                *ngFor="let category of customerCategoryByAlphabet" (click)="onFilterSelection(category)"
                style="padding: 2px;">
                <small class="strong">{{category?.keys | uppercase}}</small>
            </button>
        </mat-card>
    </mat-expansion-panel> -->


</mat-accordion>
<div class="px-2 mt-1 bg-ultra-light" *ngIf="filtersList?.length">
    <small class="strong px-2">Filters</small><br>
    <div class="mt-1"
        style="display: flex;align-items: flex-start;justify-content: flex-start;flex-wrap: wrap;flex-direction: row;">
        <button mat-raised-button color="primary" [style.background]="filter.code" *ngFor="let filter of filtersList" class="mr-1 mb-1"
            style="padding: 0 4px 0px 16px">
            <small class="mr-1">{{filter| uppercase}}</small>
            <!-- <mat-icon class="mat-icon-sm pt-1" (click)="removeFilter(filter)">clear</mat-icon> -->
        </button>
    </div>
</div>



<div *ngIf="filtersList?.length" class="d-flex w-100" style="position: absolute;bottom: 0;z-index: 5;padding: 0;">
    <button mat-button class="w-100 bg-ultra-light rounded-0" (click)="onResetFilter()">
        <span class="fancy-text text-uppercase">Reset</span>
    </button>
    <button mat-raised-button class="bg-green w-100 rounded-0" (click)="onApplyFilter()">
        <span class="fancy-text text-uppercase">Apply</span>
    </button>
</div>